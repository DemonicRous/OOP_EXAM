## Вложенные классы в Java

> В Java вложенными классами называются классы, которые определены внутри другого класса. Вложенные классы могут быть публичными (public), приватными (private) или защищёнными (protected). Они используются для организации кода и улучшения его читаемости.

**Классификация вложенных классов:**

1. Статические вложенные классы (static nested classes): Это классы, определённые внутри другого класса и объявленные с ключевым словом static. Они не связаны с экземпляром внешнего класса и могут использоваться без создания экземпляра внешнего класса.
2. Нестатические вложенные классы (non-static nested classes): Эти классы связаны с конкретным экземпляром внешнего класса. Для их использования необходимо создать экземпляр внешнего класса.
3. Внутренние классы (inner classes): Внутренние классы — это нестатические вложенные классы, которые имеют доступ к членам внешнего класса, включая приватные поля и методы.
4. Локальные классы (local classes): Локальные классы определяются внутри блока кода, такого как метод или блок инициализации. Они могут использовать переменные из окружающего блока, но не могут иметь статических членов.
5. Анонимные классы (anonymous classes): Анонимные классы создаются на лету и не имеют имени. Они обычно используются при создании объектов, которые реализуют интерфейс или наследуются от абстрактного класса.

**Варианты использования вложенных классов:**

* Организация кода: Вложенные классы позволяют организовать код в более логичные блоки. Это упрощает понимание и поддержку кода.
* Улучшение читаемости: Вложенные классы помогают избежать длинных имён классов и делают код более читаемым.
* Инкапсуляция: Вложенные классы обеспечивают дополнительную инкапсуляцию, скрывая детали реализации от внешних классов.
* Создание вспомогательных классов: Вложенные классы можно использовать для создания вспомогательных классов, которые используются только внутри внешнего класса.
* Реализация интерфейсов: Вложенные классы могут реализовывать интерфейсы, что позволяет внешнему классу использовать их функциональность.

**Нарушение инкапсуляции:**

Инкапсуляция — это механизм, который скрывает детали реализации класса от других классов. В Java инкапсуляция достигается через модификаторы доступа (public, private, protected). Вложенные классы также могут нарушать инкапсуляцию, если они имеют доступ к приватным членам внешнего класса. Однако это может быть оправдано, если вложенный класс является внутренним классом и используется для улучшения читаемости кода.

Вот несколько примеров использования вложенных классов в Java:

**Пример статического вложенного класса:**

```java
public class OuterClass {
    static class InnerClass {
        public void doSomething() {
            System.out.println("Hello World!");
        }
    }
}
```

В этом примере класс `OuterClass` содержит статический вложенный класс `InnerClass`. Статический вложенный класс не связан с экземпляром внешнего класса и может использоваться без создания экземпляра внешнего класса.

**Пример нестатического вложенного класса (внутреннего класса):**

```java
public class OuterClass {
    class InnerClass {
        private int x;

        public InnerClass(int x) {
            this.x = x;
        }

        public int getX() {
            return x;
        }

        public void setX(int x) {
            this.x = x;
        }
    }

    public static void main(String[] args) {
        OuterClass outer = new OuterClass();
        InnerClass inner = outer.new InnerClass(10);
        System.out.println(inner.getX()); // Выводит 10
    }
}
```

Здесь класс `OuterClass` имеет внутренний класс `InnerClass`, который связан с конкретным экземпляром `outer`. Для использования внутреннего класса необходимо создать экземпляр внешнего класса `outer` и вызвать метод `new` для создания экземпляра внутреннего класса `inner`.

**Пример анонимного класса:**

```java
interface MyInterface {
    void doSomething();
}

public class Main {
    public static void main(String[] args) {
        MyInterface myInterface = new MyInterface() {
            @Override
            public void doSomething() {
                System.out.println("Doing something...");
            }
        };

        myInterface.doSomething(); // Выводит "Doing something..."
    }
}
```

Этот пример демонстрирует создание анонимного класса, который реализует интерфейс `MyInterface`. Анонимный класс создаётся на лету и не имеет имени.